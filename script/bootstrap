#!/usr/bin/env bash

function docker_package_install {
  source /etc/lsb-release

  case "$DISTRIB_CODENAME" in
    xenial)
      sudo aptitude install -y docker.io
      ;;
    *)
      sudo apt-key add "$shome/etc/docker.gpg"
      curl -sS -L https://get.docker.com/ | bash
      ;;
  esac
}

function bootstrap {
  local shome="${_docker_home:-"$(cd -P -- "$(dirname -- "$BASH_SOURCE")/.." && pwd -P)"}"
  source "$shome/script/profile"

  case "$(uname -s)" in
    Darwin)
      block compile pkg \
        'https://github.com/docker/toolbox/releases/download/v1.12.0/DockerToolbox-1.12.0.pkg'
      ;;
    Linux)
      docker_package_install
      ;;
  esac
}

bootstrap
